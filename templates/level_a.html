<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>WhatYouSay-LevelA-Render</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" href="/static/css/forms.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<div id="page-wrapper">
  <!-- Header -->
				<div id="header-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<header id="header">
									<h1><a href="index.html" id="logo">WhatYouSay</a></h1>
									<nav id="nav">
										<a href="{{ url_for('index') }}">Homepage</a>
                                        <a href="#">Method</a>
                                        <a href="#">Publication</a>
                                        <a href="#">Privacy</a>
                                        <a href="#">HowYouConnect</a>

									</nav>
								</header>

							</div>
						</div>
					</div>
				</div>

<!-- Main -->

<div id="main">
	<div class="container">
		<div class="row main-row">
			<div class="col-12">
                
 
            <section>                   
            <h2>Level A analysis</h2>
                
			<h3>Participation overview</h3>

			<table class="alt">
			  <thead>
			    <tr>
			      <th>Speaker</th>
			      <th>Messages</th>
			      <th>% of chat</th>
			    </tr>
			  </thead>
			  <tbody>
			    {% for row in metrics.ranked %}
			    <tr {% if row.is_user %}style="font-weight:600;"{% endif %}>
			      <td>{{ row.label }}</td>
			      <td>{{ row.count }}</td>
			      <td>{{ "%.1f"|format(row.percent) }}%</td>
			    </tr>
			    {% endfor %}
			  </tbody>
			</table>

			{% if metrics.plots.emotion and metrics.plots.emotion.type == "data" and metrics.plots.emotion.data is defined %}
			<h3>Emotion distribution</h3>
			<canvas id="emotionChart"></canvas>
			
			<script>
			const emotionData = {{ metrics.plots.emotion.value | tojson }};
			
			new Chart(document.getElementById("emotionChart"), {
			  type: "bar",
			  data: {
				labels: Object.keys(emotionData),
				datasets: [{
				  label: "Emotion count",
				  data: Object.values(emotionData)
				}]
			  },
			  options: {
				responsive: true,
				plugins: { legend: { display: false } }
			  }
			});
			</script>
			{% endif %}

			{% if metrics.plots.emotion is not none and metrics.plots.emotion.type == "data" %}
			<h3>Moral / value framing</h3>
			<canvas id="moralChart"></canvas>
			
			<script>
			const moralData = {{ metrics.plots.moral.value | tojson }};
			
			new Chart(document.getElementById("moralChart"), {
			  type: "bar",
			  data: {
			    labels: Object.keys(moralData),
			    datasets: [{
			      label: "Moral loading",
			      data: Object.values(moralData)
			    }]
			  },
			  options: {
			    responsive: true,
			    plugins: { legend: { display: false } }
			  }
			});
			</script>
			{% endif %}

			{% if metrics.plots.emotion is not none and metrics.plots.emotion.type == "data" %}
			<h3>Emoji valence timeline</h3>
			<canvas id="valenceChart"></canvas>
			
			<script>
			const valenceSeries = {{ metrics.plots.valence.value | tojson }};
			
			new Chart(document.getElementById("valenceChart"), {
			  type: "line",
			  data: {
			    labels: valenceSeries.map((_, i) => i + 1),
			    datasets: [{
			      label: "Valence",
			      data: valenceSeries,
			      tension: 0.2
			    }]
			  },
			  options: {
			    responsive: true
			  }
			});
			</script>
			{% endif %}

				
            <a class="button" href="{{ url_for('level_b') }}">Oh, please continue to Level B....</a>
            <p>
              <a href="/WhatYouSay/">Cancel and return</a>
            </p>
            </section>

				</div>
			</div>
		</div>
</div>

  
  
			<!-- Footer -->
				<div id="footer-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">

								<section>
									<h2>How about a truckload of links?</h2>
									<div>
										<div class="row">
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Suspendisse varius ipsum</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Vitae magna sed dolore</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Suspendisse varius ipsum</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Vitae magna sed dolore</a></li>
												</ul>
											</div>
										</div>
									</div>
								</section>

							</div>
							<div class="col-4 col-12-medium">

								<section>
									<h2>Something of interest</h2>
									<p>Duis neque nisi, dapibus sed mattis quis, rutrum accumsan sed.
									Suspendisse eu varius nibh. Suspendisse vitae magna eget odio amet
									mollis justo facilisis quis. Sed sagittis mauris amet tellus gravida
									lorem ipsum dolor sit blandit.</p>
									<footer class="controls">
										<a href="#" class="button">Oh, please continue ....</a>
									</footer>
								</section>

							</div>
						</div>
						<div class="row">
							<div class="col-12">

								<div id="copyright">
									&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
								</div>

							</div>
						</div>
					</div>
				</div>



<!-- Scripts -->
			<script src="/static/js/jquery.min.js"></script>
            <script src="/static/js/browser.min.js"></script>
            <script src="/static/js/breakpoints.min.js"></script>
            <script src="/static/js/util.js"></script>
            <script src="{{ url_for('static', filename='js//main.js') }}"></script>
</body>
</html>








